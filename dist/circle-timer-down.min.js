"use strict";!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.CircleTimerDown=e()}(this,function(){function t(t){var e={startDate:"2017/01/01 00:00:00",nowDate:(new Date).dateParsing(),endDate:"2018/01/01 00:00:00",labelDay:"Day",labelHours:"Hours",labelMinutes:"Minutes",labelSeconds:"Seconds"};this.options=e.extend(t),this.init()}return Object.prototype.extend=function(t){for(var e in t)t.hasOwnProperty(e)&&("object"==typeof this[e]&&this.hasOwnProperty(e)&&null!=this[e]?this[e].extend(t[e]):this[e]=t[e]);return this},Object.defineProperty(Date.prototype,"dateParsing",{value:function(){function t(t){return(t<10?"0":"")+t}return this.getFullYear()+"/"+t(this.getMonth()+1)+"/"+t(this.getDate())+" "+t(this.getHours())+":"+t(this.getMinutes())+":"+t(this.getSeconds())}}),t.prototype.parseTime=function(){var t,e,s,i=new Date(this.options.startDate),o=new Date(this.options.endDate),n=new Date(this.options.nowDate);t=o.getTime()-n.getTime(),e=n.getTime()-i.getTime(),s=o.getTime()-i.getTime(),t=Math.ceil(t/1e3),e=Math.ceil(e/1e3/60/60/24%7),s=Math.ceil(s/1e3/60/60/24%7),this.totalSecsLeft=t,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24),daysLeft:e,daysAll:s},n>=o&&this.stop()},t.prototype.render=function(){for(var t=document.querySelector(".circle-timer"),e=document.createElement("ul"),s=0;s<4;s++){var i=document.createElement("li"),o=document.createElement("p"),n=document.createElement("span");o.appendChild(n),0===s?(o.innerHTML+=this.options.labelDay,i.id="days"):1===s?(i.id="hours",o.innerHTML+=this.options.labelHours):2===s?(i.id="minutes",o.innerHTML+=this.options.labelMinutes):3===s&&(i.id="seconds",o.innerHTML+=this.options.labelSeconds),i.appendChild(o),i.innerHTML+='<svg width="120" height="120" xmlns="http://www.w3.org/2000/svg"><g><circle class="circle_main" r="50" cy="60" cx="60" fill="none"/><circle id="circle" class="circle_animation" r="50" cy="60" cx="60" fill="none"/></g></svg>',i.className="chart",e.appendChild(i),e.className="timer"}t.appendChild(e)},t.prototype.checkTime=function(){const t=24,e=60,s=60;var i=314,o=this.offset.daysAll,n=o-this.offset.days,r=t-this.offset.hours,f=e-this.offset.minutes,a=s-this.offset.seconds;this.runTimer=function(){if(document.querySelector("#days span").innerHTML=this.offset.days+"",document.querySelector("#hours span").innerHTML=this.offset.hours+"",document.querySelector("#minutes span").innerHTML=this.offset.minutes+"",document.querySelector("#seconds span").innerHTML=this.offset.seconds+"",document.querySelector("#days .circle_animation").style.strokeDashoffset=i-n*(i/o),document.querySelector("#hours .circle_animation").style.strokeDashoffset=i-r*(i/t),document.querySelector("#minutes .circle_animation").style.strokeDashoffset=i-f*(i/e),document.querySelector("#seconds .circle_animation").style.strokeDashoffset=i-a*(i/s),this.offset.days>0&&0===this.offset.hours&&0===this.offset.minutes&&0===this.offset.seconds)this.offset.minutes=59,this.offset.hours=23,this.offset.seconds=s,this.offset.days--,a=0,r=0,f=0,n++,r++,f++;else if(this.offset.hours>0&&0===this.offset.minutes&&0===this.offset.seconds)this.offset.minutes=59,this.offset.seconds=s,this.offset.hours--,a=0,f=0,f++,r++;else if(this.offset.minutes>0&&0===this.offset.seconds)this.offset.minutes--,this.offset.seconds=s,a=0,f++;else if(0===this.offset.days&&0===this.offset.hours&&0===this.offset.minutes&&0===this.offset.seconds)return void clearInterval(this.interval);this.offset.seconds--,a++},this.runTimer()},t.prototype.start=function(){this.checkTime(),this.interval=setInterval(function(){this.runTimer()}.bind(this),1e3)},t.prototype.stop=function(){for(var t in this.offset){if("daysLeft"===t)break;this.offset[t]=0}this.checkTime()},t.prototype.init=function(){this.render(),this.parseTime(),this.start()},t});