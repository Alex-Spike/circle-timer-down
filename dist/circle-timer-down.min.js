"use strict";!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.CircleTimerDown=t()}(this,function(){function e(e){var t={startDate:"2017/01/01 00:00:00",nowDate:(new Date).dateParsing(),endDate:"2018/01/01 00:00:00",labelDay:"Day",labelHours:"Hours",labelMinutes:"Minutes",labelSeconds:"Seconds"};this.options=t.extend(e),this.init()}return Object.prototype.extend=function(e){for(var t in e)e.hasOwnProperty(t)&&("object"==typeof this[t]&&this.hasOwnProperty(t)&&null!=this[t]?this[t].extend(e[t]):this[t]=e[t]);return this},Object.defineProperty(Date.prototype,"dateParsing",{value:function(){function e(e){return(e<10?"0":"")+e}return this.getFullYear()+"/"+e(this.getMonth()+1)+"/"+e(this.getDate())+" "+e(this.getHours())+":"+e(this.getMinutes())+":"+e(this.getSeconds())}}),e.prototype.parseTime=function(){var e,t,s,i=new Date(this.options.startDate),o=new Date(this.options.endDate),n=new Date(this.options.nowDate);e=o.getTime()-n.getTime(),t=n.getTime()-i.getTime(),s=o.getTime()-i.getTime(),e=Math.ceil(e/1e3),t=Math.ceil(t/1e3/60/60/24),s=Math.ceil(s/1e3/60/60/24),this.totalSecsLeft=e,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24),daysLeft:t,daysAll:s},n>=o&&this.stop()},e.prototype.render=function(){for(var e=document.querySelector(".circle-timer"),t=document.createElement("ul"),s=0;s<4;s++){var i=document.createElement("li"),o=document.createElement("p"),n=document.createElement("span");o.appendChild(n),0===s?(o.innerHTML+=this.options.labelDay,i.id="days"):1===s?(i.id="hours",o.innerHTML+=this.options.labelHours):2===s?(i.id="minutes",o.innerHTML+=this.options.labelMinutes):3===s&&(i.id="seconds",o.innerHTML+=this.options.labelSeconds),i.appendChild(o),i.innerHTML+='<svg width="120" height="120" xmlns="http://www.w3.org/2000/svg"><g><circle class="circle_main" r="50" cy="60" cx="60" fill="none"/><circle id="circle" class="circle_animation" r="50" cy="60" cx="60" fill="none"/></g></svg>',i.className="chart",t.appendChild(i),t.className="timer"}e.appendChild(t)},e.prototype.checkTime=function(){var e=24,t=60,s=60,i=314,o=this.offset.daysAll,n=o-this.offset.days,r=e-this.offset.hours,f=t-this.offset.minutes,a=s-this.offset.seconds,h=document.querySelector("#days span"),c=document.querySelector("#hours span"),l=document.querySelector("#minutes span"),u=document.querySelector("#seconds span"),d=document.querySelector("#days .circle_animation"),m=document.querySelector("#hours .circle_animation"),p=document.querySelector("#minutes .circle_animation"),y=document.querySelector("#seconds .circle_animation");this.runTimer=function(){if(h.innerHTML=this.offset.days+"",c.innerHTML=this.offset.hours+"",l.innerHTML=this.offset.minutes+"",u.innerHTML=this.offset.seconds+"",d.style.strokeDashoffset=i-n*(i/o),m.style.strokeDashoffset=i-r*(i/e),p.style.strokeDashoffset=i-f*(i/t),y.style.strokeDashoffset=i-a*(i/s),this.offset.days>0&&0===this.offset.hours&&0===this.offset.minutes&&0===this.offset.seconds)this.offset.minutes=t-1,this.offset.hours=e-1,this.offset.seconds=s,this.offset.days--,a=0,r=0,f=0,n++,r++,f++;else if(this.offset.hours>0&&0===this.offset.minutes&&0===this.offset.seconds)this.offset.minutes=t-1,this.offset.seconds=s,this.offset.hours--,a=0,f=0,f++,r++;else if(this.offset.minutes>0&&0===this.offset.seconds)this.offset.minutes--,this.offset.seconds=s,a=0,f++;else if(0===this.offset.days&&0===this.offset.hours&&0===this.offset.minutes&&0===this.offset.seconds)return void clearInterval(this.interval);this.offset.seconds--,a++},this.runTimer()},e.prototype.start=function(){this.checkTime(),this.interval=setInterval(function(){this.runTimer()}.bind(this),1e3)},e.prototype.stop=function(){for(var e in this.offset){if("daysLeft"===e)break;this.offset[e]=0}this.checkTime()},e.prototype.init=function(){this.render(),this.parseTime(),this.start()},e});